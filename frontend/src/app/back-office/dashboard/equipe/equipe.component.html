<!-- back-office/components/dashboard/equipe/equipe.component.html -->
<div class="form-wrapper">
  <h1 class="admin-title">
    <i class="fas fa-users me-2"></i> Liste des Équipes
  </h1>

  <div class="actions" style="text-align: right; margin: 1rem 0;">
    <button class="btn btn-primary" (click)="onAddEquipe()">
      <i class="fas fa-plus me-2"></i> Ajouter Équipe
    </button>
    <button class="btn btn-secondary ms-2" (click)="downloadPDF()">
      <i class="fas fa-download me-2"></i> Exporter en PDF
    </button>
  </div>

  <!-- Filters and Search -->
  <div class="filters">
    <div class="filter-group">
      <label for="statusFilter">Filtrer par statut :</label>
      <select id="statusFilter" class="form-select" [(ngModel)]="statusFilter" (change)="filterEquipes()">
        <option value="">Tous</option>
        <option value="ACTIVE">Actif</option>
        <option value="INACTIVE">Inactif</option>
        <!-- Ajouter d'autres valeurs de TeamStatus si nécessaire -->
      </select>
    </div>
    <div class="search-group">
      <input
        type="text"
        placeholder="Rechercher par nom ou stade..."
        [(ngModel)]="searchQuery"
        (input)="filterEquipes()"
        class="search-input"
      />
      <span class="search-icon"><i class="fas fa-search"></i></span>
    </div>
  </div>

  <!-- Alerts -->
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
    <button type="button" class="alert-close" (click)="successMessage = null">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
    <button type="button" class="alert-close" (click)="errorMessage = null">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="table-wrapper">
    <table class="equipe-table">
      <thead>
        <tr>
          <th>Nom de l'équipe</th>
          <th>Stade</th>
          <th>Date de fondation</th>
          <th>Dernière mise à jour</th>
          <th>Ligue</th>
          <th>Couleurs</th>
          <th>Limite d'effectif</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let equipe of paginatedEquipes">
          <td>{{ equipe.teamName }}</td>
          <td>{{ equipe.homeStadium || 'N/A' }}</td>
          <td>{{ equipe.foundedDate | date:'mediumDate' }}</td>
          <td>{{ equipe.lastUpdated | date:'mediumDate' }}</td>
          <td>{{ equipe.league || 'N/A' }}</td>
          <td>{{ equipe.teamColors || 'N/A' }}</td>
          <td>{{ equipe.squadSizeLimit || 'N/A' }}</td>
          <td>{{ equipe.status }}</td>
          <td class="d-flex align-items-center gap-2">
            <button
              class="btn btn-primary btn-sm"
              (click)="equipe.id !== undefined ? onEditEquipe(equipe.id) : null"
              title="Modifier l'équipe"
              aria-label="Modifier l'équipe"
            >
              <i class="fas fa-edit"></i>
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="equipe.id !== undefined ? onDeleteEquipe(equipe.id) : null"
              title="Supprimer l'équipe"
              aria-label="Supprimer l'équipe"
            >
              <i class="fas fa-trash"></i>
            </button>
            <button
              class="btn btn-info btn-sm"
              (click)="equipe.id !== undefined ? onViewPlayers(equipe.id) : null"
              title="Voir les joueurs"
              aria-label="Voir les joueurs"
            >
              <i class="fas fa-users"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="filteredEquipes.length === 0" class="no-equipes">
      <p>Aucune équipe trouvée.</p>
    </div>

    <!-- Pagination -->
    <div class="pagination" *ngIf="filteredEquipes.length > 0">
      <button class="btn btn-secondary" [disabled]="currentPage === 1" (click)="previousPage()">
        <i class="fas fa-chevron-left me-1"></i> Précédent
      </button>
      <span class="page-info">
        Page {{ currentPage }} sur {{ totalPages }}
      </span>
      <button class="btn btn-secondary" [disabled]="currentPage === totalPages" (click)="nextPage()">
        Suivant <i class="fas fa-chevron-right me-1"></i>
      </button>
    </div>
  </div>
</div>
